{% extends '/templates/layout.html' %}

{% block content %}
<h1>Admin Clients Default</h1>
<client-list id="clientList"></client-list>
<modal-dialog id="clientDlg">
    <client-editor id="clientEditor"></client-editor>
</modal-dialog>
{% endblock %}

{% block scripts %}
<script type="module" src="/static/js/components/admin/clients/admin.clients.list.js"></script>
<script type="module" src="/static/js/components/admin/clients/client.edit.js"></script>
<script type="module" src="/static/js/api/admin.clients.js"></script>
<script type="module" src="/static/js/modal.dialog.js"></script>
<script>
(function(){
    const cl = document.getElementById('clientList');
    const dlg = document.getElementById('clientDlg');
    
    cl.addEventListener('addClient', function(e){
        const modal = dlg.show();
        const editor = modal.querySelector('.dialog-wrapper client-editor');
        editor.addEventListener('save', function(e) {
            dlg.refresh();
            dlg.hide();
        });
        editor.addEventListener('cancel', function(e) {
            dlg.hide();
        });
    });
})();
</script>
{% endblock scripts %}