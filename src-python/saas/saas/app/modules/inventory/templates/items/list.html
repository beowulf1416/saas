{% extends "saas.app.modules.inventory:templates/default.html" %}

{% block title %}
Inventory Items
{% endblock title %}

{% block content %}
<h1>Inventory Content goes here</h1>
<notification-list></notification-list>
<div class="items-wrapper">
    <div class="toolbar-wrapper">
        <nav class="navbar is-transparent" role="toolbar" aria-label="Items Table Actions">
            <div class="navbar-item">
                <a class="link-new" title="New Item" href="{{ request.route_path('inventory.items.add') }}">
                    <span class="material-icons">insert_drive_file</span>
                </a>
            </div><!-- navbar-item -->
            <div class="navbar-item">
                <form class="item-filter control">
                    <input type="search" id="itemSearch" name="itemSearch" class="form-input-search" title="Search for Item" placeholder="Search" />
                    <button type="button" class="btn btn-flat btn-search">
                        <span class="material-icons">search</span>
                    </button>
                </form>
            </div><!-- .navbar-item -->
        </nav>
    </div><!-- .toolbar-wrapper -->
    <items-table></items-table>
</div><!-- .table-wrapper -->
{% endblock content %}

{% block scripts %}
<script type="module" src="/static/js/components/notification.list.js"></script>
<script type="module" src="/static/js/components/inventory/items.table.js"></script>
<script type="module" src="/static/js/helpers/inventory.js"></script>
<script type="module">
'use strict';
import { Inventory } from '/static/js/helpers/inventory.js';
(function(){
    const client_id = '{{ client_id }}';
    const notifier = document.querySelector('notification-list');

    document.querySelector('button.btn-search').addEventListener('click', function(e) {
        const tsearch = document.querySelector('input#itemSearch');
        Inventory.findItems(client_id, tsearch.value).then((r) => {
            if (r.status == 'success') {
                console.log(r);
            } else {
                notifier.add('error', r.message);
            }
        });
    });

})();
</script>
{% endblock scripts %}